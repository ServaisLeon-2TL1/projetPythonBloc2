#:import Factory kivy.factory.Factory
<AidePopup@Popup>:
    title: 'Aide'
    size_hint: (None, None)
    size: (400, 400)
    Label:
        text: ('Hello world')
WindowManager:
    MainWindow:
    MenuWindow:
    NewProductWindow:
    NewCatWindow:

<MainWindow>:
    name: "main"

    GridLayout:
        rows :4
        padding: 10
        spacing: 10

        BoxLayout:
            Label:
                text: "Bienvenue dans l'Amazon scrapp"
                haligne: "center"
                markup: True
                font_size: "50sp"

        BoxLayout:
            spacing: 10
            Button:
                text: "Besoin d'aide ?"
                size_hint: 1.3, 0.3
                pos: 100, 100
                font_size: 32
                background_color: 0.1, 0.5, 0.6, 1
                on_release: Factory.AidePopup().open()

            Button:
                text: "Let's go "
                size_hint: 1.3, 0.3
                pos: 100, 100
                font_size: 32
                background_color: 0, 1, 0, 1
                on_release:
                    app.root.current = "Menu"
                    root.manager.transition.direction = "left"

            Button:
                text: "Quitter"
                size_hint: 0.5, 0.3
                pos: 100, 100
                font_size: 32
                background_color: 1.0, 0.0, 0.0, 1.0
                on_press: app.stop()

<MenuWindow>:
    name: "Menu"
    GridLayout:
        rows : 5
        padding: 10
        spacing: 10

        BoxLayout:
            Label:
                text: "Menu"
                haligne: "center"
                markup: True
                font_size: "35sp"

        BoxLayout:
            spacing: 50

            Button:
                text: "Ajouter un produit"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0.1, 0.5, 0.6, 1
                on_release:
                    app.root.current = "formProduct"
                    root.manager.transition.direction = "up"

            Button:
                text: "Voir les produits"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0, 1, 0, 1
                on_release:

            Button:
                text: "Ajouter une catégorie"
                size_hint: 1.1, 0.5
                size_hint: 1.1, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 1.0, 0.0, 0.0, 1.0
                on_release:
                    app.root.current = "formCat"
                    root.manager.transition.direction = "down"

        BoxLayout:
            spacing: 50

            Button:
                text: "Besoin d'aide ?"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0.1, 0.5, 0.6, 1
                on_release:

            Button:
                text: "Let's go "
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0, 1, 0, 1
                on_release:

            Button:
                text: "Quitter"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 1.0, 0.0, 0.0, 1.0
                on_press:

        BoxLayout:
            spacing: 50

            Button:
                text: "Besoin d'aide ?"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0.1, 0.5, 0.6, 1
                on_release:

            Button:
                text: "Let's go "
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 0, 1, 0, 1
                on_release:

            Button:
                text: "Quitter"
                size_hint: 1.0, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 1.0, 0.0, 0.0, 1.0
                on_press:

        BoxLayout:
            spacing: 50

            Button:
                text: "Retour"
                size_hint: 0.1, 0.5
                pos: 40, 50
                font_size: 32
                background_color: 0, 1, 0, 1
                on_release:
                    app.root.current = "main"
                    root.manager.transition.direction = "right"

            Button:
                text: "Quitter"
                size_hint: 0.1, 0.5
                pos: 100, 100
                font_size: 32
                background_color: 1.0, 0.0, 0.0, 1.0
                on_press: app.stop()

<NewProductWindow>:
    id:formProduct
    name: "formProduct"
    GridLayout:
        rows :5
        padding: 10
        spacing: 10

        BoxLayout:
            Label:
                text: "Nouveau produit"
                haligne: "center"
                markup: True
                font_size: "50sp"

        BoxLayout:
            spacing: 50
            Label:
                text: "Nom du produit"
                size_hint: 0.1, 0.1
                pos: 100, 100
                font_size: "25"

            TextInput:
                id:nom
                hint_text: "Nom du produit"
                size_hint: 0.1, 0.3
                pos: 100, 100
                font_size: 16

        BoxLayout:
            spacing: 50
            Label:
                text: "URL"
                size_hint: 0.1, 0.5
                pos: 100, 100
                font_size: "25"

            TextInput:
                id: url
                hint_text: "Url Amazon"
                multiline: False
                size_hint: 0.1, 0.3
                pos: 100, 100
                font_size: 16
        BoxLayout:
            Label:
                text: "Catégories"
                size_hint: 0.1, 0.5
                pos: 100, 100
                font_size: "25"

            Spinner:
                id: spinner_id
                size_hint: 0.1, 0.4
                pos: 100, 100
                text:"Processeur"

                values: formProduct.spinner()

        BoxLayout:
            spacing: 50
            Button:
                text: "Retour"
                size_hint: 0.1, 0.3
                pos: 40, 50
                font_size: 32
                background_color: 1, 1, 0
                on_release:
                    app.root.current = "Menu"
                    root.manager.transition.direction = "right"

            Button:
                text: "Valider"
                size_hint: 0.1, 0.3
                font_size: 32
                background_color: 0, 1, 0, 1
                on_press:
                    formProduct.new_product(nom.text, url.text, spinner_id.text)
<NewCatWindow>:
    id: formCat
    name: "formCat"
    GridLayout:
        rows :4

        padding: 10
        spacing: 10

        BoxLayout:
            Label:
                text: "Nouvelle catégories"
                haligne: "center"
                markup: True
                font_size: "50sp"

        BoxLayout:
            spacing: 50
            Label:
                text: "Nom de la catégorie"
                size_hint: 0.1, 0.2
                pos: 100, 100
                font_size: "25"

            TextInput:
                id: nom_cat
                hint_text: "Nom de la catégorie"
                multiline: False
                size_hint: 0.1, 0.3
                pos: 100, 100
                font_size: 16

        BoxLayout:


        BoxLayout:
            spacing: 50
            Button:
                text: "Retour"
                size_hint: 0.1, 0.3
                pos: 40, 50
                font_size: 32
                background_color: 1, 1, 0
                on_release:
                    app.root.current = "Menu"
                    root.manager.transition.direction = "right"

            Button:
                text: "Valider"
                size_hint: 0.1, 0.3
                font_size: 32
                background_color: 0, 1, 0, 1
                on_press: formCat.return_cat(nom_cat.text)